# fantastic bash functions

# get a common execution environment
. "$OJS/common.sh"

# finds and removes .DS_Store files (only on primary drive)
function dsnuke {
  echo "${RED}dsnuke$RESET finds and removes ${YELLOW}.DS_Store$RESET files (password required)"
  sudo find -x / -type f -name .DS_Store -delete
  echo "$DONE_MSG"
}

# creates and navigates to a new directory
function mkcd {
  mkdir -p "$1"
}

# expands any path to an absolute
function realpath {
  [[ "$1" = /* ]] && echo "$1" || echo "$PWD/${1#./}"
}

# sources a given file by first checking if it is readable
function ssource {
  # ensure a single argument
  [[ "$#" -ne 1 ]] && return 1
  # ensure readable
  [[ ! -r "$1" ]] && echo "could not source $1" && return 1
  # source as normal
  . "$1"
  echo "$DONE_MSG"
}

# symlinks the dotfiles by running the linker script
function relink {
  ssource "$OJS/scripts/02_linker.sh"
}

# sources the .bash_profile
function sour {
  ssource "$HOME/.bash_profile"
}

# # convert audio files in current directory to mp3 and save to ./output/
# function aconvert {
#   mkdir output
#   for file in *.$1; do
#     ffmpeg -i "$file" -acodec libmp3lame -ab 320k "output/${file[@]/%$1/mp3}"
#   done
# }
